## Описание
health-checker это сервис, который проверяет загруженность систем и возвращает 503 ошибку, если загруженность превышает заданный порог.
Он также предоставляет эндпоинт для проверки своего состояния ("address"/check). В случае если загруженность какой-то системы входит в зону значительного превышения порога, то через 10 интервалов, 
заданных пользователем система будет считаться недоступной и при обращении по эндпоинту будет возвращаться 503 ошибка (StatusServiceUnavailable). Отслеживаются утилизации CPU, RAM, сети и дисковго I/O.

## Доступность
Приложение доступно только для Windows из-за использования WMI для получения информации о системе.

## Флаги/Переменные окружения
| Флаги/Переменные окружения | Описание                                                                                                                | Стандартное значение |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------|----------------------|
| -i / CHECK_INTERVAL        | Интервал в секундах, по тику которого будет проводиться опрос систем.                                                   | 60 секунд            |
| -p / PORT                  | Порт, по которому будет доступно приложение                                                                             | 8080                 |
| -a / ADDRESS               | Адрес, по которому будет доступно приложение                                                                            | localhost            |
| -d / DEBUG                 | Если установлен, то в консоль будут выводиться сообщения отладки _(Не указывайте, если вам не нужны сообщения отладки)_ | false                |

_Заметьте, что если указаны и флаги и переменные окружения, то переменные окружения имеют больший приоритет_

## Использование
Скомпилируйте придожение с помощью команды `go build` или загрузите его из релизов на Гитхабе и запустите с помощью команды `./health-checker`. Укажите флаги если необходимо.

## Прослушивание эндпоинта
Приложение будет ожидать GET-запросы на `address:port/check` эндпоинте.

## Пример
Запустите приложение командой `health-checker.exe -i 10s -p 8080 -a localhost -d` или `CHECK_INTERVAL=10s PORT=8080 ADDRESS=localhost DEBUG=true health-checker.exe`

## Используемые библиотеки
- [env](https://github.com/caarlos0/env) для парсинга переменных окружения
- [testify](https://github.com/stretchr/testify) для тестирования
- [wmi](https://github.com/yusufpapurcu/wmi) для обращения через WMI к системе
